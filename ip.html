
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>IP Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-katex/katex.min.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="tcp.html" />
    
    
    <link rel="prev" href="elan.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="osi.html">
            
                <a href="osi.html">
            
                    
                    OSI Modell
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="physical.html">
            
                <a href="physical.html">
            
                    
                    Physical Layer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="datalink.html">
            
                <a href="datalink.html">
            
                    
                    Data Link Layer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="network.html">
            
                <a href="network.html">
            
                    
                    Network Layer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="transport.html">
            
                <a href="transport.html">
            
                    
                    Transport Layer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="session.html">
            
                <a href="session.html">
            
                    
                    Session Layer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="presentation.html">
            
                <a href="presentation.html">
            
                    
                    Presentation Layer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="application.html">
            
                <a href="application.html">
            
                    
                    Application Layer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="lan.html">
            
                <a href="lan.html">
            
                    
                    LAN
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="elan.html">
            
                <a href="elan.html">
            
                    
                    ELAN
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.12" data-path="ip.html">
            
                <a href="ip.html">
            
                    
                    IP
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="tcp.html">
            
                <a href="tcp.html">
            
                    
                    TCP
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="glossar.html">
            
                <a href="glossar.html">
            
                    
                    Glossar
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="small/">
            
                <a href="small/">
            
                    
                    Kompakt
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" data-path="small/lan.html">
            
                <a href="small/lan.html">
            
                    
                    LAN
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >IP</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="internet-protokoll">Internet Protokoll</h1>
<h2 id="network-layer">Network Layer</h2>
<ul>
<li>Datenaustausch &#xFC;ber heterogene Netze</li>
<li>hardware-unabh&#xE4;ngige Adresse pro Knoten</li>
<li>Verbindung mittels Router oder Gateway</li>
<li>vituelles Netz aka Internet</li>
</ul>
<h3 id="adressierungsschema">Adressierungsschema</h3>
<ul>
<li>Flacher Adressraum: eindeutig, sagt nichts &#xFC;ber Position aus, schlecht f&#xFC;r grosse Netze</li>
<li>Hierarscher Adressraum: Subnetze, vereinfacht Routing, neue Adresse falls Host das Netz wechselt</li>
</ul>
<h3 id="router">Router</h3>
<ul>
<li>Auf Network-Layer, Funktion wie Bridges</li>
<li>Empfangen nur an sie adressierte Pakete (vom Datalink-Layer)</li>
<li>Weiterleitung Anhang Network Layer Adresse, nicht MAC</li>
<li>K&#xF6;nnen heterogene Netze koppeln (z.B. Ethernet mit XDSL), braucht Protokoll-Stack der Netwerk-Technologie</li>
</ul>
<h4 id="vorteile">Vorteile</h4>
<ul>
<li>Immer optimaler Pfad, effektiver in WAN</li>
<li>gute Netzbereichtrennung, logisch und verkehrsm&#xE4;ssig</li>
<li>unbeschr&#xE4;nkte Anzahl Knoten</li>
<li>Sicherheit und eifachere Verwaltung durch Trennen von Netzbereichen</li>
<li>Barriere f&#xFC;r Broadcast-Meldungen (gegen Broadcast-Storms)</li>
</ul>
<h4 id="nachteile">Nachteile</h4>
<ul>
<li>Teurer, schwieriger zum konfigurieren</li>
<li>Nicht alle Protokolle lassen sich routen</li>
</ul>
<h4 id="routing">Routing</h4>
<ul>
<li>Routing: optimaler Weg bestimmen</li>
<li>Forwarding: Weiterleitung der Datenpakete</li>
<li>Muss Topologie des Netzes kennen</li>
<li>Routing Protocols: RIP, EGP, OSPF, BGP</li>
<li>OSI Protokolle: IS-ES, IS-IS</li>
</ul>
<h5 id="brouter">Brouter</h5>
<ul>
<li>Bridging Router / Layer-3-Switches</li>
<li>Routen einzelne Protokolle</li>
</ul>
<h2 id="adressierung">Adressierung</h2>
<ul>
<li>Hosts: Kommunikationsquellen</li>
<li>Multi-homed Hosts: In mehreren Subnetzen angeschlossen</li>
<li>Netzwerk-Adresse ist die tiefste</li>
<li>Broadcast-Adresse ist die h&#xF6;chste</li>
<li>Subnetzmaske AND Knotenadresse =&gt; Netzadresse (tiefste)</li>
<li>Invertierte Subnetzmaske OR Knotenadresse =&gt; Broadcastadresse (h&#xF6;chste)</li>
<li>Classful-Routing mit Netzklassen</li>
<li>Classless-Routing mit Netzmasken</li>
<li>Subnetzmaske gibt an mit Bits: 1 -&gt; Netz, 0 -&gt; Host<ul>
<li>255(1111&apos;1111) 254(1111&apos;1110) 252(1111&apos;1100) 248(1111&apos;1000) 240(1111&apos;0000) 224(1110&apos;0000) 192(1100&apos;0000) 128(1000&apos;0000) 0(0000&apos;0000)</li>
</ul>
</li>
</ul>
<h3 id="aufbau">Aufbau</h3>
<ul>
<li>Big-Endian: h&#xF6;chstwertigstes Byte zuerst</li>
<li>IP-Adresse:<ul>
<li>eindeutige 32 Bit grosse Zahl</li>
<li>besteht aus Netz- und Hostnummer</li>
</ul>
</li>
<li>Hosts im gleichen Netz haben gleiche Netznummer</li>
</ul>
<h3 id="classful-routing">Classful-Routing</h3>
<ul>
<li>Netzklassen mit fixem Definitionsbereich</li>
<li>Erste Adress-Bits bestimmen Gr&#xF6;sse</li>
<li>Ben&#xF6;tigt keine Netzmaske, effizientes Routing</li>
</ul>
<table>
<thead>
<tr>
<th>Kl</th>
<th>Pre</th>
<th>Adressbereich</th>
<th>Netze</th>
<th>Knoten</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>0</td>
<td>1.0.0.0 - 127.255.255.255</td>
<td>128</td>
<td>16&apos;777&apos;214</td>
</tr>
<tr>
<td>B</td>
<td>10</td>
<td>128.0.0.0 - 191.255.255.255</td>
<td>16&apos;384</td>
<td>65&apos;534</td>
</tr>
<tr>
<td>C</td>
<td>110</td>
<td>192.0.0.0 - 223.255.255.255</td>
<td>2&apos;097&apos;152</td>
<td>254</td>
</tr>
<tr>
<td>D</td>
<td>1110</td>
<td>224.0.0.0 - 239.255.255.255</td>
<td>Multicast</td>
<td>-</td>
</tr>
<tr>
<td>E</td>
<td>11110</td>
<td>240.0.0.0 - 247.255.255.255</td>
<td>Reserviert</td>
<td>-</td>
</tr>
</tbody>
</table>
<h3 id="verwaltung">Verwaltung</h3>
<ul>
<li>Eindeutige Verteilung durch IANA -&gt; RIR dann RIPE-NCC -&gt; Switch (als Local Internet Registry)</li>
<li>Private Netze m&#xFC;ssen nicht registriert werden<ul>
<li>A: 10.0.0.0 / 255.0.0.0</li>
<li>B: 172.16.0.0 - 172.21.0.0 / 255.255.0.0</li>
<li>C: 192.168.0.0 - 192.168.255.0 / 255.255.255.0</li>
</ul>
</li>
<li>Loopback: 127.x.x.x lokal - werde nicht aufs Netz gesendet</li>
</ul>
<h2 id="routing">Routing</h2>
<ul>
<li>Routing-Tabelle bestimmt Pfad eines Datagramm<ul>
<li>Eintrag sortiert nach L&#xE4;nge der Netmaske</li>
<li>Router sucht von oben nach unten nach (Zieladr AND Subnetzmaske), stimmt die Netzmaske wird das Interface verwendet und an das Gateway weitergeleitet7</li>
</ul>
</li>
</ul>
<h2 id="protokoll">Protokoll</h2>
<h3 id="header">Header</h3>
<p>TODO: IP header bild</p>
<ul>
<li>Version (4B): IPv4, IPv6</li>
<li>IHL (4B): Internet Header Lenght, 5 (ohne Optionen) bis max. 15</li>
<li>Type of Service (8B): Precedence, Delay, Throughput, Reliability<ul>
<li>Neu DSCP (Bit 0-5), ECN (Bit 6-7)</li>
</ul>
</li>
<li>Total Lenght (16B): Gesamtl&#xE4;nge Datagramm in Byte (inkl. Header). Max 65&apos;535</li>
<li>Identification (16B): Identifiziert Fragmente</li>
<li>Flags (3B): Bit 0 -&gt; immer Null, 1 -&gt; DF (Don&apos;t Fragment), 2 -&gt; MF (More Fragments)</li>
<li>Fragment Offset (13B): 8-Byte-Einheiten f&#xFC;r die Position des Fragments</li>
<li>TTL (8B): Lifetime, verhindert endlos Routing</li>
<li>Protocol (8B): &#xDC;bergeordnetes Protokoll im Datenteil (1=ICMP,6=TCP,17=UDP)</li>
<li>Header Checksum (16B): Header als Worte invertiert (Einerkomplement), addiert, dann die invertierte Summe</li>
<li>Source Address (32B): Urspr&#xFC;nglicher Absender</li>
<li>Dest Address (32B): Schlussendlicher Empf&#xE4;nger </li>
<li>Options/Padding (bis 60Byte): optional, Options f&#xFC;r Erweiterungen, Padding f&#xFC;r Auff&#xFC;llen auf ganzzahliges Vielfaches von 32Bit.</li>
</ul>
<h2 id="fragmentation">Fragmentation</h2>
<ul>
<li>MTU: Max. &#xDC;bertragungseinheit (max MTU 1500 an Daten)</li>
<li>Aufteilung in Fragmente mit eigenmen IP-Header</li>
<li>Reassembly: Am Zielort zusammensetzen mittels Offset (FO), More Fragments (MF), Total Lenght (TL) und IHL<ul>
<li>Nicht fragmentiert: FO=0, MF=0</li>
<li>Erstes: FO=0, MF=1 (Header wird in Header-Buffer kopiert)</li>
<li>Letztes: FO=x&gt;0, MF=0 (FO + TL = Total-Data-Lenght)</li>
<li>Daten-Buffer als Speicher</li>
<li>Fragment-Block-Bit-Tabelle pr&#xFC;ft Vollst&#xE4;ndigkeit</li>
<li>Timer, nach ca. 15Sek abbruch</li>
</ul>
</li>
</ul>
<h2 id="kapselung">Kapselung</h2>
<ul>
<li>Address Resolution: &#xDC;bersetzung der Protokolladresse in Hardware-Adresse</li>
<li>Zwischen Internet- und Datalink-Layer</li>
<li>Routing &#xFC;ber mehrere Hosts wird jeweils die Src und Dest Adresse ausgetauscht</li>
<li>Algorithmisch: Direkte Bestimmung der MAC-Adresse, falls Zusammenhang besteht</li>
<li>Tabellengesteuert: Routing Tabelle, muss manuell gef&#xFC;hrt werden</li>
<li>Nachritenaustausch: Anfragen der Adresse f&#xFC;r jedes Paket, ineffizient</li>
</ul>
<h3 id="arp">ARP</h3>
<ul>
<li>Kombination von Nachrichtenaustausch und Tabelle</li>
<li>4-Byte IP auf 6-Byte Ethernet Adresse</li>
<li>ARP-Request (Broadcast) mit IP, betroffener Knoten sendet ARP-Reply (Unicast)</li>
<li>ARP-Cache mit TTL f&#xFC;r Eintr&#xE4;ge</li>
<li>massive Belastung in grossen Netzwerken</li>
<li>Gratuitous ARP-Request: Senden der eigenen IP Adresse bei registrierung zur Konflikterkennung</li>
<li>Gratuitous ARP-Reply: Bei &#xC4;nderung der IP mit Broadcast</li>
</ul>
<h2 id="rarp">RARP</h2>
<ul>
<li>IP Adresse mit Ethernet-Adresse finden</li>
<li>Besser als Ablegen einer IP-Adresse in Disk-Image</li>
<li>Nachteil: MAC-Layer-Broadcast wird nicht weitergegeben von Routern (darum BootP und DHCP mit UDP)</li>
</ul>
<h2 id="icmp">ICMP</h2>
<ul>
<li>Router oder Empf&#xE4;nger-Host Mitteilung and Sender </li>
<li>Meldung von Fehlern, k&#xFC;rzeren Wegen, Bufferoverflow</li>
<li>Keine ICMP-Meldung &#xFC;ber ICMP und Fragmente mit FO!=0</li>
<li>Als IP-Datagramm</li>
<li>ICMP-Typ (Fehler): <ul>
<li>3=Destination Unreachable: Datagramm kann nicht ans Endziel bef&#xF6;rdert werden </li>
<li>4=Source Quench: Wenn Puffer ersch&#xF6;pft, fordert auf die &#xDC;bertragungsrate zu redizieren</li>
<li>5=Redirect: falscher Router, fordert auf das Routing zu &#xE4;ndern</li>
<li>11=Time Exceeded: Falls TTL des Datagramm null oder Fragment Timer abgelaufen</li>
<li>12=Parameter Problem: ung&#xFC;ltiger Wert im IP-Header</li>
</ul>
</li>
<li>ICMP-Typ (Info): 0=Echo Reply,8=Echo,13=Timestamp,14=Timestamp Reply,15=Information Request,16=Information Reply</li>
</ul>
<h2 id="destination-unreachable-message">Destination Unreachable Message</h2>
<p>TODO</p>
<h2 id="time-exceeded-message">Time Exceeded Message</h2>
<p>TODO</p>
<h2 id="echo-or-echo-reply-message">Echo or Echo Reply Message</h2>
<p>TODO</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="elan.html" class="navigation navigation-prev " aria-label="Previous page: ELAN">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="tcp.html" class="navigation navigation-next " aria-label="Next page: TCP">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"IP","level":"1.12","depth":1,"next":{"title":"TCP","level":"1.13","depth":1,"path":"tcp.md","ref":"tcp.md","articles":[]},"previous":{"title":"ELAN","level":"1.11","depth":1,"path":"elan.md","ref":"elan.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["katex"],"pluginsConfig":{"katex":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":false,"fontSize":11,"fontFamily":"Calibri","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"ip.md","mtime":"2018-01-14T16:11:57.395Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-01-14T16:59:46.563Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

